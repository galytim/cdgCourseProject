<div class="w-[500px] m-auto mt-16">
    <% if !@post.archived?%>

        <div class="px-2""><%=link_to @post.user.username,  profile_path(@post.user)%></div>
        
            <%= image_tag @post.image_url, class:"h-[500px] w-[500px] rounded-[6px] mt-3"%>
        <div class="ml-1" >

            <div class="mt-3 px-2 flex flex-row h-[42px]">
            <div id="like_button" data-like-post-id="<%= @post.id%>">
                <%if @post.liked_users.exists?(current_user.id)%>
                    <%= button_to "unlike", like_path(@post), remote: true, method: :post%>
                <%else%>
                    <%= button_to "like", like_path(@post), remote: true, method: :post%>
                <%end%>
            </div>
                <br>
            <div class="flex flex-row ml-5">
                 Likes:
                 <div id="like-count" data-post-id="<%= @post.id %>">
                     <%= @post.liked_users.count %>
                </div> 
                </div>
            </div>    
        
                    
            <div class="font-bold">
                <%= @post.user.username%>
            </div> 
            <%=  @post.body %>
        </div>
    <% end %>
</div>

<div class="w-[500px] m-auto"> 
<div class="flex flex-row">
<%if @post.author?(current_user)%>

    <%= link_to "Edit", edit_post_path%>
    <%= link_to "Destroy", post_path(@post), class:"ml-3" ,  data: {
                  method: :delete,
                  confirm: "Are you sure?"
                }%>
<%end%>

<br>
<%= link_to "Back", feed_path, class:"ml-3"  %>
</div>
<div class="mt-5">
<%if !(@post.comments.empty?)%>
<div>Comments:</div>
    <%= render @post.comments %>
<%else%>
    <div> Noone coment yet </div>
<%end%>
</div>
<div class="mt-5">Add a comment:</div>
<%= render 'comments/form' %>
<div> 
